<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Gewicht eingeben - {{ profile.name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>{{ profile.name }} - Gewicht & BMI</h1>

    <form method="POST">
        <label>Aktuelles Gewicht (kg):</label>
        <input type="number" step="0.1" name="weight" required>
        <button type="submit">Speichern</button>
    </form>

    {% if history %}
        <h2>Gewichtsverlauf</h2>
        <canvas id="weightChart" width="600" height="300"></canvas>
        <script>
            const ctx = document.getElementById('weightChart').getContext('2d');
            const weightChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: {{ history|map(attribute='date')|list }},
                    datasets: [
                        {
                            label: 'Gewicht (kg)',
                            data: {{ history|map(attribute='weight')|list }},
                            borderColor: 'blue',
                            backgroundColor: 'rgba(0,0,255,0.1)',
                            fill: false,
                            tension: 0.1
                        },
                        {
                            label: 'BMI',
                            data: {{ bmi_list }},
                            borderColor: 'red',
                            backgroundColor: 'rgba(255,0,0,0.1)',
                            fill: false,
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: { legend: { position: 'top' } },
                    scales: { y: { beginAtZero: false } }
                }
            });
        </script>
    {% endif %}

    <p><a href="{{ url_for('index') }}">Zur√ºck zur Profil-Auswahl</a></p>
</body>
</html>
